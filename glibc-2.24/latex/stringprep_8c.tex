\hypertarget{stringprep_8c}{}\doxysection{libidn/stringprep.c File Reference}
\label{stringprep_8c}\index{libidn/stringprep.c@{libidn/stringprep.c}}
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include \char`\"{}stringprep.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{stringprep_8c_a94dc20d5912e1a845b3c68cd1184c953}{I\+N\+V\+E\+R\+T\+ED}}(\mbox{\hyperlink{test-float-libmvec-sincosf-main_8c_a730933e849731648c69ca0f5bfd3f996}{x}})~((\mbox{\hyperlink{test-float-libmvec-sincosf-main_8c_a730933e849731648c69ca0f5bfd3f996}{x}}) \& (($\sim$0\+U\+L) $>$$>$ 1))
\item 
\#define \mbox{\hyperlink{stringprep_8c_a974eb05575c977cfd407a0f6a75570d2}{U\+N\+A\+P\+P\+L\+I\+C\+A\+P\+L\+E\+F\+L\+A\+GS}}(\mbox{\hyperlink{testfnm_8c_ac8bf36fe0577cba66bccda3a6f7e80a4}{flags}},  profileflags)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} \mbox{\hyperlink{stringprep_8c_a35ec8ecbceadb10704d7aead643cca0a}{stringprep\+\_\+4i}} (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} $\ast$ucs4, \mbox{\hyperlink{posix_2bits_2unistd_8h_a18cbf70d4399275bcd4f3ff1e4743ddd}{size\+\_\+t}} $\ast$\mbox{\hyperlink{fmtmsg_8c_a96bbf959016e4411c9e6b9812a8be60a}{len}}, \mbox{\hyperlink{posix_2bits_2unistd_8h_a18cbf70d4399275bcd4f3ff1e4743ddd}{size\+\_\+t}} maxucs4len, \mbox{\hyperlink{stringprep_8h_a506f050dce2736119e66580bf11befc5}{Stringprep\+\_\+profile\+\_\+flags}} \mbox{\hyperlink{testfnm_8c_ac8bf36fe0577cba66bccda3a6f7e80a4}{flags}}, \mbox{\hyperlink{gmp-impl_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{stringprep_8h_a1789bfee6f9e3b1a647b453334e082ed}{Stringprep\+\_\+profile}} $\ast$\mbox{\hyperlink{x86__64_2dl-machine_8h_a0b7d3d42a1e9ce22201605a0cc1e4951}{profile}})
\item 
\mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} \mbox{\hyperlink{stringprep_8c_a091bdd80e56348185944d9cff1007736}{stringprep\+\_\+4zi}} (\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} $\ast$ucs4, \mbox{\hyperlink{posix_2bits_2unistd_8h_a18cbf70d4399275bcd4f3ff1e4743ddd}{size\+\_\+t}} maxucs4len, \mbox{\hyperlink{stringprep_8h_a506f050dce2736119e66580bf11befc5}{Stringprep\+\_\+profile\+\_\+flags}} \mbox{\hyperlink{testfnm_8c_ac8bf36fe0577cba66bccda3a6f7e80a4}{flags}}, \mbox{\hyperlink{gmp-impl_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{stringprep_8h_a1789bfee6f9e3b1a647b453334e082ed}{Stringprep\+\_\+profile}} $\ast$\mbox{\hyperlink{x86__64_2dl-machine_8h_a0b7d3d42a1e9ce22201605a0cc1e4951}{profile}})
\item 
\mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} \mbox{\hyperlink{stringprep_8c_ab33afced459e6653197b0f46bd56ac51}{stringprep}} (char $\ast$\mbox{\hyperlink{tst-strtod5_8c_a52bb50fce643c4899922808db7d60d42}{in}}, \mbox{\hyperlink{posix_2bits_2unistd_8h_a18cbf70d4399275bcd4f3ff1e4743ddd}{size\+\_\+t}} maxlen, \mbox{\hyperlink{stringprep_8h_a506f050dce2736119e66580bf11befc5}{Stringprep\+\_\+profile\+\_\+flags}} \mbox{\hyperlink{testfnm_8c_ac8bf36fe0577cba66bccda3a6f7e80a4}{flags}}, \mbox{\hyperlink{gmp-impl_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{stringprep_8h_a1789bfee6f9e3b1a647b453334e082ed}{Stringprep\+\_\+profile}} $\ast$\mbox{\hyperlink{x86__64_2dl-machine_8h_a0b7d3d42a1e9ce22201605a0cc1e4951}{profile}})
\item 
\mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} \mbox{\hyperlink{stringprep_8c_a558f1bcdc182903787bc058ba85cfe81}{stringprep\+\_\+profile}} (\mbox{\hyperlink{gmp-impl_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} char $\ast$\mbox{\hyperlink{tst-strtod5_8c_a52bb50fce643c4899922808db7d60d42}{in}}, char $\ast$$\ast$\mbox{\hyperlink{tst-strtod4_8c_a8905de849f303a8598c0f7c3d37d46ed}{out}}, \mbox{\hyperlink{gmp-impl_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} char $\ast$\mbox{\hyperlink{x86__64_2dl-machine_8h_a0b7d3d42a1e9ce22201605a0cc1e4951}{profile}}, \mbox{\hyperlink{stringprep_8h_a506f050dce2736119e66580bf11befc5}{Stringprep\+\_\+profile\+\_\+flags}} \mbox{\hyperlink{testfnm_8c_ac8bf36fe0577cba66bccda3a6f7e80a4}{flags}})
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{stringprep_8c_a94dc20d5912e1a845b3c68cd1184c953}\label{stringprep_8c_a94dc20d5912e1a845b3c68cd1184c953}} 
\index{stringprep.c@{stringprep.c}!INVERTED@{INVERTED}}
\index{INVERTED@{INVERTED}!stringprep.c@{stringprep.c}}
\doxysubsubsection{\texorpdfstring{INVERTED}{INVERTED}}
{\footnotesize\ttfamily \#define I\+N\+V\+E\+R\+T\+ED(\begin{DoxyParamCaption}\item[{}]{\mbox{\hyperlink{test-float-libmvec-sincosf-main_8c_a730933e849731648c69ca0f5bfd3f996}{x}} }\end{DoxyParamCaption})~((\mbox{\hyperlink{test-float-libmvec-sincosf-main_8c_a730933e849731648c69ca0f5bfd3f996}{x}}) \& (($\sim$0\+U\+L) $>$$>$ 1))}

\mbox{\Hypertarget{stringprep_8c_a974eb05575c977cfd407a0f6a75570d2}\label{stringprep_8c_a974eb05575c977cfd407a0f6a75570d2}} 
\index{stringprep.c@{stringprep.c}!UNAPPLICAPLEFLAGS@{UNAPPLICAPLEFLAGS}}
\index{UNAPPLICAPLEFLAGS@{UNAPPLICAPLEFLAGS}!stringprep.c@{stringprep.c}}
\doxysubsubsection{\texorpdfstring{UNAPPLICAPLEFLAGS}{UNAPPLICAPLEFLAGS}}
{\footnotesize\ttfamily \#define U\+N\+A\+P\+P\+L\+I\+C\+A\+P\+L\+E\+F\+L\+A\+GS(\begin{DoxyParamCaption}\item[{}]{\mbox{\hyperlink{testfnm_8c_ac8bf36fe0577cba66bccda3a6f7e80a4}{flags}},  }\item[{}]{profileflags }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{((!\mbox{\hyperlink{stringprep_8c_a94dc20d5912e1a845b3c68cd1184c953}{INVERTED}}(profileflags) \&\& !(profileflags \& \mbox{\hyperlink{include_2unistd_8h_aa894e293e2b55edfcc20525fbf577895}{flags}}) \&\& profileflags) || \(\backslash\)}
\DoxyCodeLine{   ( \mbox{\hyperlink{stringprep_8c_a94dc20d5912e1a845b3c68cd1184c953}{INVERTED}}(profileflags) \&\& (profileflags \& \mbox{\hyperlink{include_2unistd_8h_aa894e293e2b55edfcc20525fbf577895}{flags}})))}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{stringprep_8c_ab33afced459e6653197b0f46bd56ac51}\label{stringprep_8c_ab33afced459e6653197b0f46bd56ac51}} 
\index{stringprep.c@{stringprep.c}!stringprep@{stringprep}}
\index{stringprep@{stringprep}!stringprep.c@{stringprep.c}}
\doxysubsubsection{\texorpdfstring{stringprep()}{stringprep()}}
{\footnotesize\ttfamily \mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} stringprep (\begin{DoxyParamCaption}\item[{char $\ast$}]{in,  }\item[{\mbox{\hyperlink{posix_2bits_2unistd_8h_a18cbf70d4399275bcd4f3ff1e4743ddd}{size\+\_\+t}}}]{maxlen,  }\item[{\mbox{\hyperlink{stringprep_8h_a506f050dce2736119e66580bf11befc5}{Stringprep\+\_\+profile\+\_\+flags}}}]{flags,  }\item[{\mbox{\hyperlink{gmp-impl_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{stringprep_8h_a1789bfee6f9e3b1a647b453334e082ed}{Stringprep\+\_\+profile}} $\ast$}]{profile }\end{DoxyParamCaption})}

stringprep\+: @in\+: input/ouput array with string to prepare. @maxlen\+: maximum length of input/output array. @flags\+: stringprep profile flags, or 0. @profile\+: pointer to stringprep profile to use.

Prepare the input zero terminated U\+T\+F-\/8 string according to the stringprep profile, and write back the result to the input string.

Note that you must convert strings entered in the systems locale into U\+T\+F-\/8 before using this function, see \mbox{\hyperlink{stringprep_8h_a4fdc6ed7a9b74a74c5fe94e844972e65}{stringprep\+\_\+locale\+\_\+to\+\_\+utf8()}}.

Since the stringprep operation can expand the string, @maxlen indicate how large the buffer holding the string is. This function will not read or write to characters outside that size.

The @flags are one of Stringprep\+\_\+profile\+\_\+flags, or 0.

The @profile contain the instructions to perform. Your application can define new profiles, possibly re-\/using the generic stringprep tables that always will be part of the library, or use one of the currently supported profiles.

Return value\+: Returns S\+T\+R\+I\+N\+G\+P\+R\+E\+P\+\_\+\+OK iff successful, or an error code. \mbox{\Hypertarget{stringprep_8c_a35ec8ecbceadb10704d7aead643cca0a}\label{stringprep_8c_a35ec8ecbceadb10704d7aead643cca0a}} 
\index{stringprep.c@{stringprep.c}!stringprep\_4i@{stringprep\_4i}}
\index{stringprep\_4i@{stringprep\_4i}!stringprep.c@{stringprep.c}}
\doxysubsubsection{\texorpdfstring{stringprep\_4i()}{stringprep\_4i()}}
{\footnotesize\ttfamily \mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} stringprep\+\_\+4i (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} $\ast$}]{ucs4,  }\item[{\mbox{\hyperlink{posix_2bits_2unistd_8h_a18cbf70d4399275bcd4f3ff1e4743ddd}{size\+\_\+t}} $\ast$}]{len,  }\item[{\mbox{\hyperlink{posix_2bits_2unistd_8h_a18cbf70d4399275bcd4f3ff1e4743ddd}{size\+\_\+t}}}]{maxucs4len,  }\item[{\mbox{\hyperlink{stringprep_8h_a506f050dce2736119e66580bf11befc5}{Stringprep\+\_\+profile\+\_\+flags}}}]{flags,  }\item[{\mbox{\hyperlink{gmp-impl_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{stringprep_8h_a1789bfee6f9e3b1a647b453334e082ed}{Stringprep\+\_\+profile}} $\ast$}]{profile }\end{DoxyParamCaption})}

stringprep\+\_\+4i\+: @ucs4\+: input/output array with string to prepare. @len\+: on input, length of input array with Unicode code points, on exit, length of output array with Unicode code points. @maxucs4len\+: maximum length of input/output array. @flags\+: stringprep profile flags, or 0. @profile\+: pointer to stringprep profile to use.

Prepare the input U\+C\+S-\/4 string according to the stringprep profile, and write back the result to the input string.

The input is not required to be zero terminated (@ucs4\mbox{[}@len\mbox{]} = 0). The output will not be zero terminated unless @ucs4\mbox{[}@len\mbox{]} = 0. Instead, see \mbox{\hyperlink{stringprep_8c_a091bdd80e56348185944d9cff1007736}{stringprep\+\_\+4zi()}} if your input is zero terminated or if you want the output to be.

Since the stringprep operation can expand the string, @maxucs4len indicate how large the buffer holding the string is. This function will not read or write to code points outside that size.

The @flags are one of Stringprep\+\_\+profile\+\_\+flags, or 0.

The @profile contain the instructions to perform. Your application can define new profiles, possibly re-\/using the generic stringprep tables that always will be part of the library, or use one of the currently supported profiles.

Return value\+: Returns S\+T\+R\+I\+N\+G\+P\+R\+E\+P\+\_\+\+OK iff successful, or an error code. \mbox{\Hypertarget{stringprep_8c_a091bdd80e56348185944d9cff1007736}\label{stringprep_8c_a091bdd80e56348185944d9cff1007736}} 
\index{stringprep.c@{stringprep.c}!stringprep\_4zi@{stringprep\_4zi}}
\index{stringprep\_4zi@{stringprep\_4zi}!stringprep.c@{stringprep.c}}
\doxysubsubsection{\texorpdfstring{stringprep\_4zi()}{stringprep\_4zi()}}
{\footnotesize\ttfamily \mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} stringprep\+\_\+4zi (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}} $\ast$}]{ucs4,  }\item[{\mbox{\hyperlink{posix_2bits_2unistd_8h_a18cbf70d4399275bcd4f3ff1e4743ddd}{size\+\_\+t}}}]{maxucs4len,  }\item[{\mbox{\hyperlink{stringprep_8h_a506f050dce2736119e66580bf11befc5}{Stringprep\+\_\+profile\+\_\+flags}}}]{flags,  }\item[{\mbox{\hyperlink{gmp-impl_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{stringprep_8h_a1789bfee6f9e3b1a647b453334e082ed}{Stringprep\+\_\+profile}} $\ast$}]{profile }\end{DoxyParamCaption})}

stringprep\+\_\+4zi\+: @ucs4\+: input/output array with zero terminated string to prepare. @maxucs4len\+: maximum length of input/output array. @flags\+: stringprep profile flags, or 0. @profile\+: pointer to stringprep profile to use.

Prepare the input zero terminated U\+C\+S-\/4 string according to the stringprep profile, and write back the result to the input string.

Since the stringprep operation can expand the string, @maxucs4len indicate how large the buffer holding the string is. This function will not read or write to code points outside that size.

The @flags are one of Stringprep\+\_\+profile\+\_\+flags, or 0.

The @profile contain the instructions to perform. Your application can define new profiles, possibly re-\/using the generic stringprep tables that always will be part of the library, or use one of the currently supported profiles.

Return value\+: Returns S\+T\+R\+I\+N\+G\+P\+R\+E\+P\+\_\+\+OK iff successful, or an error code. \mbox{\Hypertarget{stringprep_8c_a558f1bcdc182903787bc058ba85cfe81}\label{stringprep_8c_a558f1bcdc182903787bc058ba85cfe81}} 
\index{stringprep.c@{stringprep.c}!stringprep\_profile@{stringprep\_profile}}
\index{stringprep\_profile@{stringprep\_profile}!stringprep.c@{stringprep.c}}
\doxysubsubsection{\texorpdfstring{stringprep\_profile()}{stringprep\_profile()}}
{\footnotesize\ttfamily \mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} stringprep\+\_\+profile (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{gmp-impl_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} char $\ast$}]{in,  }\item[{char $\ast$$\ast$}]{out,  }\item[{\mbox{\hyperlink{gmp-impl_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} char $\ast$}]{profile,  }\item[{\mbox{\hyperlink{stringprep_8h_a506f050dce2736119e66580bf11befc5}{Stringprep\+\_\+profile\+\_\+flags}}}]{flags }\end{DoxyParamCaption})}

stringprep\+\_\+profile\+: @in\+: input array with U\+T\+F-\/8 string to prepare. @out\+: output variable with pointer to newly allocate string. @profile\+: name of stringprep profile to use. @flags\+: stringprep profile flags, or 0.

Prepare the input zero terminated U\+T\+F-\/8 string according to the stringprep profile, and return the result in a newly allocated variable.

Note that you must convert strings entered in the systems locale into U\+T\+F-\/8 before using this function, see \mbox{\hyperlink{stringprep_8h_a4fdc6ed7a9b74a74c5fe94e844972e65}{stringprep\+\_\+locale\+\_\+to\+\_\+utf8()}}.

The output @out variable must be deallocated by the caller.

The @flags are one of Stringprep\+\_\+profile\+\_\+flags, or 0.

The @profile specifies the name of the stringprep profile to use. It must be one of the internally supported stringprep profiles.

Return value\+: Returns S\+T\+R\+I\+N\+G\+P\+R\+E\+P\+\_\+\+OK iff successful, or an error code. 