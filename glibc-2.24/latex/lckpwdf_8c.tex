\hypertarget{lckpwdf_8c}{}\doxysection{shadow/lckpwdf.c File Reference}
\label{lckpwdf_8c}\index{shadow/lckpwdf.c@{shadow/lckpwdf.c}}
{\ttfamily \#include $<$fcntl.\+h$>$}\newline
{\ttfamily \#include $<$libc-\/lock.\+h$>$}\newline
{\ttfamily \#include $<$shadow.\+h$>$}\newline
{\ttfamily \#include $<$signal.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$sys/file.\+h$>$}\newline
{\ttfamily \#include $<$kernel-\/features.\+h$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{lckpwdf_8c_a15a6aa9d9a534f2adc586073909c3a79}{P\+W\+D\+\_\+\+L\+O\+C\+K\+F\+I\+LE}}~\char`\"{}/etc/.\mbox{\hyperlink{tst-cond18_8c_a0abaf4b5d42c4e5d19190035fade3599}{pwd.\+lock}}\char`\"{}
\item 
\#define \mbox{\hyperlink{lckpwdf_8c_a45ba202b05caf39795aeca91b0ae547e}{T\+I\+M\+E\+O\+UT}}~15 /$\ast$ sec $\ast$/
\item 
\#define \mbox{\hyperlink{lckpwdf_8c_a2b578926d08a009e5a0fa2e2fd8fa02f}{R\+E\+T\+U\+R\+N\+\_\+\+C\+L\+O\+S\+E\+\_\+\+FD}}(\mbox{\hyperlink{sysdeps_2posix_2gai__strerror_8c_a826d9a0600812ad9244a5d0a6cf84e4d}{code}})
\item 
\#define \mbox{\hyperlink{lckpwdf_8c_aacb231b9a023ee588f679720abb96eff}{R\+E\+T\+U\+R\+N\+\_\+\+R\+E\+S\+T\+O\+R\+E\+\_\+\+H\+A\+N\+D\+L\+ER}}(\mbox{\hyperlink{sysdeps_2posix_2gai__strerror_8c_a826d9a0600812ad9244a5d0a6cf84e4d}{code}})
\item 
\#define \mbox{\hyperlink{lckpwdf_8c_ad20d84d6be1816eabf05a9dd59259da1}{R\+E\+T\+U\+R\+N\+\_\+\+C\+L\+E\+A\+R\+\_\+\+A\+L\+A\+RM}}(\mbox{\hyperlink{sysdeps_2posix_2gai__strerror_8c_a826d9a0600812ad9244a5d0a6cf84e4d}{code}})
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{lckpwdf_8c_a22e1ccd66c522451f089672c4dd1ff26}{\+\_\+\+\_\+libc\+\_\+lock\+\_\+define\+\_\+initialized}} (static, \mbox{\hyperlink{tst-cond18_8c_a0abaf4b5d42c4e5d19190035fade3599}{lock}})
\item 
\mbox{\hyperlink{lckpwdf_8c_a83b14ca938d179b74822e3a2bb195403}{weak\+\_\+alias}} (\mbox{\hyperlink{include_2shadow_8h_a6138e93b14b5a0b70f0e76fd499b31d6}{\+\_\+\+\_\+lckpwdf}}, \mbox{\hyperlink{shadow_2shadow_8h_ac56de6b04a4498d9757680de50f1d33b}{lckpwdf}})
\item 
\mbox{\hyperlink{lckpwdf_8c_a8b1863fa2c1effac67a742ef4f4a714c}{weak\+\_\+alias}} (\mbox{\hyperlink{include_2shadow_8h_ad6e2320ce3c82a8cc047950f0622b052}{\+\_\+\+\_\+ulckpwdf}}, \mbox{\hyperlink{shadow_2shadow_8h_ab332aed017e48b94b4c6a05c4ff30b57}{ulckpwdf}})
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{lckpwdf_8c_a15a6aa9d9a534f2adc586073909c3a79}\label{lckpwdf_8c_a15a6aa9d9a534f2adc586073909c3a79}} 
\index{lckpwdf.c@{lckpwdf.c}!PWD\_LOCKFILE@{PWD\_LOCKFILE}}
\index{PWD\_LOCKFILE@{PWD\_LOCKFILE}!lckpwdf.c@{lckpwdf.c}}
\doxysubsubsection{\texorpdfstring{PWD\_LOCKFILE}{PWD\_LOCKFILE}}
{\footnotesize\ttfamily \#define P\+W\+D\+\_\+\+L\+O\+C\+K\+F\+I\+LE~\char`\"{}/etc/.\mbox{\hyperlink{tst-cond18_8c_a0abaf4b5d42c4e5d19190035fade3599}{pwd.\+lock}}\char`\"{}}

\mbox{\Hypertarget{lckpwdf_8c_ad20d84d6be1816eabf05a9dd59259da1}\label{lckpwdf_8c_ad20d84d6be1816eabf05a9dd59259da1}} 
\index{lckpwdf.c@{lckpwdf.c}!RETURN\_CLEAR\_ALARM@{RETURN\_CLEAR\_ALARM}}
\index{RETURN\_CLEAR\_ALARM@{RETURN\_CLEAR\_ALARM}!lckpwdf.c@{lckpwdf.c}}
\doxysubsubsection{\texorpdfstring{RETURN\_CLEAR\_ALARM}{RETURN\_CLEAR\_ALARM}}
{\footnotesize\ttfamily \#define R\+E\+T\+U\+R\+N\+\_\+\+C\+L\+E\+A\+R\+\_\+\+A\+L\+A\+RM(\begin{DoxyParamCaption}\item[{}]{\mbox{\hyperlink{sysdeps_2posix_2gai__strerror_8c_a826d9a0600812ad9244a5d0a6cf84e4d}{code}} }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{do} \{                                          \(\backslash\)}
\DoxyCodeLine{    \textcolor{comment}{/* Clear alarm.  */}                               \(\backslash\)}
\DoxyCodeLine{    alarm (0);                                    \(\backslash\)}
\DoxyCodeLine{    \textcolor{comment}{/* Restore old set of handled signals.  We don't need to know         \(\backslash\)}}
\DoxyCodeLine{\textcolor{comment}{       about the current one.*/}                           \(\backslash\)}
\DoxyCodeLine{    \_\_sigprocmask (\mbox{\hyperlink{bits_2sigaction_8h_a37750b78b7ae75fe02ad26e70f6cc845}{SIG\_SETMASK}}, \&saved\_set, \mbox{\hyperlink{gconv__builtin_8h_aec2f8642be81d4f41052438d470c2e6d}{NULL}});                 \(\backslash\)}
\DoxyCodeLine{    RETURN\_RESTORE\_HANDLER (\mbox{\hyperlink{sysdeps_2posix_2gai__strerror_8c_a826d9a0600812ad9244a5d0a6cf84e4d}{code}});                        \(\backslash\)}
\DoxyCodeLine{  \} \textcolor{keywordflow}{while} (0)}

\end{DoxyCode}
\mbox{\Hypertarget{lckpwdf_8c_a2b578926d08a009e5a0fa2e2fd8fa02f}\label{lckpwdf_8c_a2b578926d08a009e5a0fa2e2fd8fa02f}} 
\index{lckpwdf.c@{lckpwdf.c}!RETURN\_CLOSE\_FD@{RETURN\_CLOSE\_FD}}
\index{RETURN\_CLOSE\_FD@{RETURN\_CLOSE\_FD}!lckpwdf.c@{lckpwdf.c}}
\doxysubsubsection{\texorpdfstring{RETURN\_CLOSE\_FD}{RETURN\_CLOSE\_FD}}
{\footnotesize\ttfamily \#define R\+E\+T\+U\+R\+N\+\_\+\+C\+L\+O\+S\+E\+\_\+\+FD(\begin{DoxyParamCaption}\item[{}]{\mbox{\hyperlink{sysdeps_2posix_2gai__strerror_8c_a826d9a0600812ad9244a5d0a6cf84e4d}{code}} }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{do} \{                                          \(\backslash\)}
\DoxyCodeLine{    if ((\mbox{\hyperlink{sysdeps_2posix_2gai__strerror_8c_a826d9a0600812ad9244a5d0a6cf84e4d}{code}}) < 0 \&\& lock\_fd >= 0)                       \(\backslash\)}
\DoxyCodeLine{      \{                                       \(\backslash\)}
\DoxyCodeLine{    \_\_close (lock\_fd);                            \(\backslash\)}
\DoxyCodeLine{    lock\_fd = -\/1;                                 \(\backslash\)}
\DoxyCodeLine{      \}                                       \(\backslash\)}
\DoxyCodeLine{    \_\_libc\_lock\_unlock (lock);                            \(\backslash\)}
\DoxyCodeLine{    return (\mbox{\hyperlink{sysdeps_2posix_2gai__strerror_8c_a826d9a0600812ad9244a5d0a6cf84e4d}{code}});                                \(\backslash\)}
\DoxyCodeLine{  \} \textcolor{keywordflow}{while} (0)}

\end{DoxyCode}
\mbox{\Hypertarget{lckpwdf_8c_aacb231b9a023ee588f679720abb96eff}\label{lckpwdf_8c_aacb231b9a023ee588f679720abb96eff}} 
\index{lckpwdf.c@{lckpwdf.c}!RETURN\_RESTORE\_HANDLER@{RETURN\_RESTORE\_HANDLER}}
\index{RETURN\_RESTORE\_HANDLER@{RETURN\_RESTORE\_HANDLER}!lckpwdf.c@{lckpwdf.c}}
\doxysubsubsection{\texorpdfstring{RETURN\_RESTORE\_HANDLER}{RETURN\_RESTORE\_HANDLER}}
{\footnotesize\ttfamily \#define R\+E\+T\+U\+R\+N\+\_\+\+R\+E\+S\+T\+O\+R\+E\+\_\+\+H\+A\+N\+D\+L\+ER(\begin{DoxyParamCaption}\item[{}]{\mbox{\hyperlink{sysdeps_2posix_2gai__strerror_8c_a826d9a0600812ad9244a5d0a6cf84e4d}{code}} }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{do} \{                                          \(\backslash\)}
\DoxyCodeLine{    \textcolor{comment}{/* Restore old action handler for alarm.  We don't need to know       \(\backslash\)}}
\DoxyCodeLine{\textcolor{comment}{       about the current one.  */}                         \(\backslash\)}
\DoxyCodeLine{    \_\_sigaction (SIGALRM, \&saved\_act, \mbox{\hyperlink{gconv__builtin_8h_aec2f8642be81d4f41052438d470c2e6d}{NULL}});                      \(\backslash\)}
\DoxyCodeLine{    RETURN\_CLOSE\_FD (\mbox{\hyperlink{sysdeps_2posix_2gai__strerror_8c_a826d9a0600812ad9244a5d0a6cf84e4d}{code}});                           \(\backslash\)}
\DoxyCodeLine{  \} \textcolor{keywordflow}{while} (0)}

\end{DoxyCode}
\mbox{\Hypertarget{lckpwdf_8c_a45ba202b05caf39795aeca91b0ae547e}\label{lckpwdf_8c_a45ba202b05caf39795aeca91b0ae547e}} 
\index{lckpwdf.c@{lckpwdf.c}!TIMEOUT@{TIMEOUT}}
\index{TIMEOUT@{TIMEOUT}!lckpwdf.c@{lckpwdf.c}}
\doxysubsubsection{\texorpdfstring{TIMEOUT}{TIMEOUT}}
{\footnotesize\ttfamily \#define T\+I\+M\+E\+O\+UT~15 /$\ast$ sec $\ast$/}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{lckpwdf_8c_a22e1ccd66c522451f089672c4dd1ff26}\label{lckpwdf_8c_a22e1ccd66c522451f089672c4dd1ff26}} 
\index{lckpwdf.c@{lckpwdf.c}!\_\_libc\_lock\_define\_initialized@{\_\_libc\_lock\_define\_initialized}}
\index{\_\_libc\_lock\_define\_initialized@{\_\_libc\_lock\_define\_initialized}!lckpwdf.c@{lckpwdf.c}}
\doxysubsubsection{\texorpdfstring{\_\_libc\_lock\_define\_initialized()}{\_\_libc\_lock\_define\_initialized()}}
{\footnotesize\ttfamily \+\_\+\+\_\+libc\+\_\+lock\+\_\+define\+\_\+initialized (\begin{DoxyParamCaption}\item[{static}]{,  }\item[{\mbox{\hyperlink{tst-cond18_8c_a0abaf4b5d42c4e5d19190035fade3599}{lock}}}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{lckpwdf_8c_a83b14ca938d179b74822e3a2bb195403}\label{lckpwdf_8c_a83b14ca938d179b74822e3a2bb195403}} 
\index{lckpwdf.c@{lckpwdf.c}!weak\_alias@{weak\_alias}}
\index{weak\_alias@{weak\_alias}!lckpwdf.c@{lckpwdf.c}}
\doxysubsubsection{\texorpdfstring{weak\_alias()}{weak\_alias()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily weak\+\_\+alias (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{include_2shadow_8h_a6138e93b14b5a0b70f0e76fd499b31d6}{\+\_\+\+\_\+lckpwdf}}}]{,  }\item[{\mbox{\hyperlink{shadow_2shadow_8h_ac56de6b04a4498d9757680de50f1d33b}{lckpwdf}}}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{lckpwdf_8c_a8b1863fa2c1effac67a742ef4f4a714c}\label{lckpwdf_8c_a8b1863fa2c1effac67a742ef4f4a714c}} 
\index{lckpwdf.c@{lckpwdf.c}!weak\_alias@{weak\_alias}}
\index{weak\_alias@{weak\_alias}!lckpwdf.c@{lckpwdf.c}}
\doxysubsubsection{\texorpdfstring{weak\_alias()}{weak\_alias()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily weak\+\_\+alias (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{include_2shadow_8h_ad6e2320ce3c82a8cc047950f0622b052}{\+\_\+\+\_\+ulckpwdf}}}]{,  }\item[{\mbox{\hyperlink{shadow_2shadow_8h_ab332aed017e48b94b4c6a05c4ff30b57}{ulckpwdf}}}]{ }\end{DoxyParamCaption})}

