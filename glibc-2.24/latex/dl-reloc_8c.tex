\hypertarget{dl-reloc_8c}{}\doxysection{elf/dl-\/reloc.c File Reference}
\label{dl-reloc_8c}\index{elf/dl-\/reloc.c@{elf/dl-\/reloc.c}}
{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include $<$libintl.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$ldsodefs.\+h$>$}\newline
{\ttfamily \#include $<$sys/mman.\+h$>$}\newline
{\ttfamily \#include $<$sys/param.\+h$>$}\newline
{\ttfamily \#include $<$sys/types.\+h$>$}\newline
{\ttfamily \#include $<$\+\_\+itoa.\+h$>$}\newline
{\ttfamily \#include \char`\"{}dynamic-\/link.\+h\char`\"{}}\newline
{\ttfamily \#include $<$libc-\/internal.\+h$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{dl-reloc_8c_a97770a1cd4ae57bcae74c5972b2f82c7}{bump\+\_\+num\+\_\+cache\+\_\+relocations}}()~((\mbox{\hyperlink{malloc_8c_a06f4a6c60c1cacd41e9a961c91348e88}{void}}) 0)
\item 
\#define \mbox{\hyperlink{dl-reloc_8c_aa2a271b73709ddfcd5788f40fb45b447}{R\+E\+S\+O\+L\+V\+E\+\_\+\+M\+AP}}(ref,  \mbox{\hyperlink{unwind-dw2-fde_8h_a6ca685b8d549d38cc9c01e4b78755af3}{version}},  r\+\_\+type)
\item 
\#define \mbox{\hyperlink{dl-reloc_8c_a17a45308000477c9e31d3f59ec7acad4}{D\+I\+G\+IT}}(\mbox{\hyperlink{tst-tininess_8c_ab69a3a03fd1f62bc23517ff0b5093e5a}{b}})~\mbox{\hyperlink{generic_2__itoa_8h_a5ee8e618831cc09866d79a644f027a08}{\+\_\+itoa\+\_\+lower\+\_\+digits}}\mbox{[}(\mbox{\hyperlink{tst-tininess_8c_ab69a3a03fd1f62bc23517ff0b5093e5a}{b}}) \& 0xf\mbox{]};
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} \mbox{\hyperlink{nacl-interfaces_8h_acf1cc5dac5c78a6716a2d0e5ee7ea39e}{internal\+\_\+function}} \mbox{\hyperlink{dl-reloc_8c_ac01c030e14983916150d1af69d4d25dd}{\+\_\+dl\+\_\+try\+\_\+allocate\+\_\+static\+\_\+tls}} (struct \mbox{\hyperlink{structlink__map}{link\+\_\+map}} $\ast$\mbox{\hyperlink{structmap}{map}})
\item 
\mbox{\hyperlink{malloc_8c_a06f4a6c60c1cacd41e9a961c91348e88}{void}} \mbox{\hyperlink{nacl-interfaces_8h_acf1cc5dac5c78a6716a2d0e5ee7ea39e}{internal\+\_\+function}} \mbox{\hyperlink{misc_2sys_2cdefs_8h_ae3c8b6346b296324e0d51433d1eb4cdc}{\+\_\+\+\_\+attribute\+\_\+noinline\+\_\+\+\_\+}} \mbox{\hyperlink{dl-reloc_8c_aab01bff1af5ff94f697f5fe297bfbbf5}{\+\_\+dl\+\_\+allocate\+\_\+static\+\_\+tls}} (struct \mbox{\hyperlink{structlink__map}{link\+\_\+map}} $\ast$\mbox{\hyperlink{structmap}{map}})
\item 
\mbox{\hyperlink{malloc_8c_a06f4a6c60c1cacd41e9a961c91348e88}{void}} \mbox{\hyperlink{dl-reloc_8c_a324ba0e9910fb4107b330e7287f8b0d5}{\+\_\+dl\+\_\+nothread\+\_\+init\+\_\+static\+\_\+tls}} (struct \mbox{\hyperlink{structlink__map}{link\+\_\+map}} $\ast$\mbox{\hyperlink{structmap}{map}})
\item 
\mbox{\hyperlink{malloc_8c_a06f4a6c60c1cacd41e9a961c91348e88}{void}} \mbox{\hyperlink{dl-reloc_8c_a73808f853f34b885193f3ad505509e01}{\+\_\+dl\+\_\+relocate\+\_\+object}} (struct \mbox{\hyperlink{structlink__map}{link\+\_\+map}} $\ast$l, struct \mbox{\hyperlink{structr__scope__elem}{r\+\_\+scope\+\_\+elem}} $\ast$scope\mbox{[}$\,$\mbox{]}, \mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} reloc\+\_\+mode, \mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} consider\+\_\+profiling)
\item 
\mbox{\hyperlink{malloc_8c_a06f4a6c60c1cacd41e9a961c91348e88}{void}} \mbox{\hyperlink{nacl-interfaces_8h_acf1cc5dac5c78a6716a2d0e5ee7ea39e}{internal\+\_\+function}} \mbox{\hyperlink{dl-reloc_8c_ae41e5b6931da3094f46f268a2d837e3d}{\+\_\+dl\+\_\+protect\+\_\+relro}} (struct \mbox{\hyperlink{structlink__map}{link\+\_\+map}} $\ast$l)
\item 
\mbox{\hyperlink{malloc_8c_a06f4a6c60c1cacd41e9a961c91348e88}{void}} \mbox{\hyperlink{nacl-interfaces_8h_acf1cc5dac5c78a6716a2d0e5ee7ea39e}{internal\+\_\+function}} \mbox{\hyperlink{misc_2sys_2cdefs_8h_ae3c8b6346b296324e0d51433d1eb4cdc}{\+\_\+\+\_\+attribute\+\_\+noinline\+\_\+\+\_\+}} \mbox{\hyperlink{dl-reloc_8c_a70d121d4d24f490ef67e92fa5ff67e9b}{\+\_\+dl\+\_\+reloc\+\_\+bad\+\_\+type}} (struct \mbox{\hyperlink{structlink__map}{link\+\_\+map}} $\ast$\mbox{\hyperlink{structmap}{map}}, unsigned \mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} \mbox{\hyperlink{private_8h_a1c6de65cc31c36fe2ede0d438531d327}{type}}, \mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} \mbox{\hyperlink{powerpc_2powerpc64_2dl-machine_8h_a929bda9f6a60e2365eb66d9514bd7966}{plt}})
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{dl-reloc_8c_a97770a1cd4ae57bcae74c5972b2f82c7}\label{dl-reloc_8c_a97770a1cd4ae57bcae74c5972b2f82c7}} 
\index{dl-\/reloc.c@{dl-\/reloc.c}!bump\_num\_cache\_relocations@{bump\_num\_cache\_relocations}}
\index{bump\_num\_cache\_relocations@{bump\_num\_cache\_relocations}!dl-\/reloc.c@{dl-\/reloc.c}}
\doxysubsubsection{\texorpdfstring{bump\_num\_cache\_relocations}{bump\_num\_cache\_relocations}}
{\footnotesize\ttfamily \#define bump\+\_\+num\+\_\+cache\+\_\+relocations(\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})~((\mbox{\hyperlink{malloc_8c_a06f4a6c60c1cacd41e9a961c91348e88}{void}}) 0)}

\mbox{\Hypertarget{dl-reloc_8c_a17a45308000477c9e31d3f59ec7acad4}\label{dl-reloc_8c_a17a45308000477c9e31d3f59ec7acad4}} 
\index{dl-\/reloc.c@{dl-\/reloc.c}!DIGIT@{DIGIT}}
\index{DIGIT@{DIGIT}!dl-\/reloc.c@{dl-\/reloc.c}}
\doxysubsubsection{\texorpdfstring{DIGIT}{DIGIT}}
{\footnotesize\ttfamily \#define D\+I\+G\+IT(\begin{DoxyParamCaption}\item[{}]{\mbox{\hyperlink{tst-tininess_8c_ab69a3a03fd1f62bc23517ff0b5093e5a}{b}} }\end{DoxyParamCaption})~\mbox{\hyperlink{generic_2__itoa_8h_a5ee8e618831cc09866d79a644f027a08}{\+\_\+itoa\+\_\+lower\+\_\+digits}}\mbox{[}(\mbox{\hyperlink{tst-tininess_8c_ab69a3a03fd1f62bc23517ff0b5093e5a}{b}}) \& 0xf\mbox{]};}

\mbox{\Hypertarget{dl-reloc_8c_aa2a271b73709ddfcd5788f40fb45b447}\label{dl-reloc_8c_aa2a271b73709ddfcd5788f40fb45b447}} 
\index{dl-\/reloc.c@{dl-\/reloc.c}!RESOLVE\_MAP@{RESOLVE\_MAP}}
\index{RESOLVE\_MAP@{RESOLVE\_MAP}!dl-\/reloc.c@{dl-\/reloc.c}}
\doxysubsubsection{\texorpdfstring{RESOLVE\_MAP}{RESOLVE\_MAP}}
{\footnotesize\ttfamily \#define R\+E\+S\+O\+L\+V\+E\+\_\+\+M\+AP(\begin{DoxyParamCaption}\item[{}]{ref,  }\item[{}]{\mbox{\hyperlink{unwind-dw2-fde_8h_a6ca685b8d549d38cc9c01e4b78755af3}{version}},  }\item[{}]{r\+\_\+type }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{((\mbox{\hyperlink{include_2link_8h_a5671d2d242e02346485364bba2b9fcfc}{ELFW}}(ST\_BIND) ((*ref)-\/>st\_info) != \mbox{\hyperlink{elf_2elf_8h_a72c40de459931e6f1d041201dc7398b1}{STB\_LOCAL}}               \(\backslash\)}
\DoxyCodeLine{      \&\& \mbox{\hyperlink{misc_2sys_2cdefs_8h_aa5c70c33bdf7b0122f8a8cf5ebb850da}{\_\_glibc\_likely}} (!dl\_symbol\_visibility\_binds\_local\_p (*ref)))       \(\backslash\)}
\DoxyCodeLine{     ? ((\mbox{\hyperlink{gettextP_8h_a2a2cf4a629132aed16f845d4d1bffd95}{\_\_builtin\_expect}} ((*ref) == l-\/>l\_lookup\_cache.sym, 0)            \(\backslash\)}
\DoxyCodeLine{     \&\& \mbox{\hyperlink{aarch64_2dl-machine_8h_acc94dc627b6aab63d7af620442f35dc3}{elf\_machine\_type\_class}} (r\_type) == l-\/>l\_lookup\_cache.type\_class)  \(\backslash\)}
\DoxyCodeLine{    ? (\mbox{\hyperlink{dl-reloc_8c_a97770a1cd4ae57bcae74c5972b2f82c7}{bump\_num\_cache\_relocations}} (),                   \(\backslash\)}
\DoxyCodeLine{       (*ref) = l-\/>l\_lookup\_cache.ret,                    \(\backslash\)}
\DoxyCodeLine{       l-\/>l\_lookup\_cache.value)                       \(\backslash\)}
\DoxyCodeLine{    : (\{ \mbox{\hyperlink{structlink__map}{lookup\_t}} \_lr;                            \(\backslash\)}
\DoxyCodeLine{         int \_tc = \mbox{\hyperlink{aarch64_2dl-machine_8h_acc94dc627b6aab63d7af620442f35dc3}{elf\_machine\_type\_class}} (r\_type);                 \(\backslash\)}
\DoxyCodeLine{         l-\/>l\_lookup\_cache.type\_class = \_tc;                  \(\backslash\)}
\DoxyCodeLine{         l-\/>l\_lookup\_cache.sym = (*ref);                      \(\backslash\)}
\DoxyCodeLine{         const \textcolor{keyword}{struct }\mbox{\hyperlink{structr__found__version}{r\_found\_version}} *v = \mbox{\hyperlink{gconv__builtin_8h_aec2f8642be81d4f41052438d470c2e6d}{NULL}};               \(\backslash\)}
\DoxyCodeLine{         if ((\mbox{\hyperlink{nis__intern_8h_af19b8db86b41b300855242ee9c233b12}{version}}) != \mbox{\hyperlink{gconv__builtin_8h_aec2f8642be81d4f41052438d470c2e6d}{NULL}} \&\& (\mbox{\hyperlink{nis__intern_8h_af19b8db86b41b300855242ee9c233b12}{version}})-\/>hash != 0)             \(\backslash\)}
\DoxyCodeLine{           v = (\mbox{\hyperlink{nis__intern_8h_af19b8db86b41b300855242ee9c233b12}{version}});                              \(\backslash\)}
\DoxyCodeLine{         \_lr = \mbox{\hyperlink{dl-lookup_8c_abd9331e45e6c72891434d3cfcaed54a6}{\_dl\_lookup\_symbol\_x}} (strtab + (*ref)-\/>st\_name, l, (ref),   \(\backslash\)}
\DoxyCodeLine{                    scope, v, \_tc,                \(\backslash\)}
\DoxyCodeLine{                    \mbox{\hyperlink{generic_2ldsodefs_8h_affeecfb4b0548596bafa671799ea3f4eaaef43d69a05189f9fa4b0d98208bfe9b}{DL\_LOOKUP\_ADD\_DEPENDENCY}}, \mbox{\hyperlink{gconv__builtin_8h_aec2f8642be81d4f41052438d470c2e6d}{NULL}});      \(\backslash\)}
\DoxyCodeLine{         l-\/>l\_lookup\_cache.ret = (*ref);                      \(\backslash\)}
\DoxyCodeLine{         l-\/>l\_lookup\_cache.value = \_lr; \}))                   \(\backslash\)}
\DoxyCodeLine{     : l)}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{dl-reloc_8c_aab01bff1af5ff94f697f5fe297bfbbf5}\label{dl-reloc_8c_aab01bff1af5ff94f697f5fe297bfbbf5}} 
\index{dl-\/reloc.c@{dl-\/reloc.c}!\_dl\_allocate\_static\_tls@{\_dl\_allocate\_static\_tls}}
\index{\_dl\_allocate\_static\_tls@{\_dl\_allocate\_static\_tls}!dl-\/reloc.c@{dl-\/reloc.c}}
\doxysubsubsection{\texorpdfstring{\_dl\_allocate\_static\_tls()}{\_dl\_allocate\_static\_tls()}}
{\footnotesize\ttfamily \mbox{\hyperlink{malloc_8c_a06f4a6c60c1cacd41e9a961c91348e88}{void}} \mbox{\hyperlink{nacl-interfaces_8h_acf1cc5dac5c78a6716a2d0e5ee7ea39e}{internal\+\_\+function}} \mbox{\hyperlink{misc_2sys_2cdefs_8h_ae3c8b6346b296324e0d51433d1eb4cdc}{\+\_\+\+\_\+attribute\+\_\+noinline\+\_\+\+\_\+}} \+\_\+dl\+\_\+allocate\+\_\+static\+\_\+tls (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structlink__map}{link\+\_\+map}} $\ast$}]{map }\end{DoxyParamCaption})}

\mbox{\Hypertarget{dl-reloc_8c_a324ba0e9910fb4107b330e7287f8b0d5}\label{dl-reloc_8c_a324ba0e9910fb4107b330e7287f8b0d5}} 
\index{dl-\/reloc.c@{dl-\/reloc.c}!\_dl\_nothread\_init\_static\_tls@{\_dl\_nothread\_init\_static\_tls}}
\index{\_dl\_nothread\_init\_static\_tls@{\_dl\_nothread\_init\_static\_tls}!dl-\/reloc.c@{dl-\/reloc.c}}
\doxysubsubsection{\texorpdfstring{\_dl\_nothread\_init\_static\_tls()}{\_dl\_nothread\_init\_static\_tls()}}
{\footnotesize\ttfamily \mbox{\hyperlink{malloc_8c_a06f4a6c60c1cacd41e9a961c91348e88}{void}} \+\_\+dl\+\_\+nothread\+\_\+init\+\_\+static\+\_\+tls (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structlink__map}{link\+\_\+map}} $\ast$}]{map }\end{DoxyParamCaption})}

\mbox{\Hypertarget{dl-reloc_8c_ae41e5b6931da3094f46f268a2d837e3d}\label{dl-reloc_8c_ae41e5b6931da3094f46f268a2d837e3d}} 
\index{dl-\/reloc.c@{dl-\/reloc.c}!\_dl\_protect\_relro@{\_dl\_protect\_relro}}
\index{\_dl\_protect\_relro@{\_dl\_protect\_relro}!dl-\/reloc.c@{dl-\/reloc.c}}
\doxysubsubsection{\texorpdfstring{\_dl\_protect\_relro()}{\_dl\_protect\_relro()}}
{\footnotesize\ttfamily \mbox{\hyperlink{malloc_8c_a06f4a6c60c1cacd41e9a961c91348e88}{void}} \mbox{\hyperlink{nacl-interfaces_8h_acf1cc5dac5c78a6716a2d0e5ee7ea39e}{internal\+\_\+function}} \+\_\+dl\+\_\+protect\+\_\+relro (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structlink__map}{link\+\_\+map}} $\ast$}]{l }\end{DoxyParamCaption})}

\mbox{\Hypertarget{dl-reloc_8c_a70d121d4d24f490ef67e92fa5ff67e9b}\label{dl-reloc_8c_a70d121d4d24f490ef67e92fa5ff67e9b}} 
\index{dl-\/reloc.c@{dl-\/reloc.c}!\_dl\_reloc\_bad\_type@{\_dl\_reloc\_bad\_type}}
\index{\_dl\_reloc\_bad\_type@{\_dl\_reloc\_bad\_type}!dl-\/reloc.c@{dl-\/reloc.c}}
\doxysubsubsection{\texorpdfstring{\_dl\_reloc\_bad\_type()}{\_dl\_reloc\_bad\_type()}}
{\footnotesize\ttfamily \mbox{\hyperlink{malloc_8c_a06f4a6c60c1cacd41e9a961c91348e88}{void}} \mbox{\hyperlink{nacl-interfaces_8h_acf1cc5dac5c78a6716a2d0e5ee7ea39e}{internal\+\_\+function}} \mbox{\hyperlink{misc_2sys_2cdefs_8h_ae3c8b6346b296324e0d51433d1eb4cdc}{\+\_\+\+\_\+attribute\+\_\+noinline\+\_\+\+\_\+}} \+\_\+dl\+\_\+reloc\+\_\+bad\+\_\+type (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structlink__map}{link\+\_\+map}} $\ast$}]{map,  }\item[{unsigned \mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}}}]{type,  }\item[{\mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}}}]{plt }\end{DoxyParamCaption})}

\mbox{\Hypertarget{dl-reloc_8c_a73808f853f34b885193f3ad505509e01}\label{dl-reloc_8c_a73808f853f34b885193f3ad505509e01}} 
\index{dl-\/reloc.c@{dl-\/reloc.c}!\_dl\_relocate\_object@{\_dl\_relocate\_object}}
\index{\_dl\_relocate\_object@{\_dl\_relocate\_object}!dl-\/reloc.c@{dl-\/reloc.c}}
\doxysubsubsection{\texorpdfstring{\_dl\_relocate\_object()}{\_dl\_relocate\_object()}}
{\footnotesize\ttfamily \mbox{\hyperlink{malloc_8c_a06f4a6c60c1cacd41e9a961c91348e88}{void}} \+\_\+dl\+\_\+relocate\+\_\+object (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structlink__map}{link\+\_\+map}} $\ast$}]{l,  }\item[{struct \mbox{\hyperlink{structr__scope__elem}{r\+\_\+scope\+\_\+elem}} $\ast$}]{scope\mbox{[}$\,$\mbox{]},  }\item[{\mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}}}]{reloc\+\_\+mode,  }\item[{\mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}}}]{consider\+\_\+profiling }\end{DoxyParamCaption})}

\mbox{\Hypertarget{dl-reloc_8c_ac01c030e14983916150d1af69d4d25dd}\label{dl-reloc_8c_ac01c030e14983916150d1af69d4d25dd}} 
\index{dl-\/reloc.c@{dl-\/reloc.c}!\_dl\_try\_allocate\_static\_tls@{\_dl\_try\_allocate\_static\_tls}}
\index{\_dl\_try\_allocate\_static\_tls@{\_dl\_try\_allocate\_static\_tls}!dl-\/reloc.c@{dl-\/reloc.c}}
\doxysubsubsection{\texorpdfstring{\_dl\_try\_allocate\_static\_tls()}{\_dl\_try\_allocate\_static\_tls()}}
{\footnotesize\ttfamily \mbox{\hyperlink{tst-efgcvt_8c_ac16130087a6e16522b07fb091dc1ad62}{int}} \mbox{\hyperlink{nacl-interfaces_8h_acf1cc5dac5c78a6716a2d0e5ee7ea39e}{internal\+\_\+function}} \+\_\+dl\+\_\+try\+\_\+allocate\+\_\+static\+\_\+tls (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structlink__map}{link\+\_\+map}} $\ast$}]{map }\end{DoxyParamCaption})}

